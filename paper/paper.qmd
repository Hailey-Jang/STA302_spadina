---
title: "An Analytical Exploration of Homelessness and Suicide in Toronto"
author: 
  - Hailey Jang
thanks: "Code and data are available at: https://github.com/Hailey-Jang/Suicide-and-Homelessness.git"
date: today
abstract: "This paper presents a study focused on addressing the critical issue of suicide among Toronto's homeless population, a significant public health challenge. We developed a risk stratification model using sociodemographic data to identify homeless individuals at high risk for suicide, employing a generalized linear model that incorporates factors like sex and age. The findings, derived from data collected by Toronto Public Health since January 2017, offer insights into the patterns and predictors of suicide attempts within this vulnerable group. The importance of this research lies in its potential to guide interventions, enabling more effective prevention strategies for suicide among the homeless, particularly in settings where immediate access to mental health professionals is limited."
format:
  pdf:
    toc: true
    number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(palmerpenguins)
library(knitr)
library(here)
library(kableExtra)
library(readr)
library(tidyr)
library(dplyr)
```

# Introduction

Homelessness represents a significant public health crisis, with the intersection of inadequate housing and mental health issues exacerbating the risk of suicide among this population. Individuals experiencing homelessness face a 2- to 6-fold increased risk of suicide compared to the general population (@article1). This alarming statistic not only highlights the vulnerability of homeless individuals but also underscores the urgent need for targeted interventions and preventive measures. This paper delves into the development of a risk stratification model designed to identify homeless individuals at an elevated risk of suicide. By integrating sociodemographic data within a generalized linear model, focusing on sex and age as primary factors, our research aims to provide a predictive tool for healthcare providers and social services. The motivation behind this study stems from the critical gap in existing research regarding effective, data-driven strategies for suicide prevention in the homeless community.

Our research methodology involved the analysis of comprehensive data collected by Toronto Public Health, starting from January 2017. This dataset not only provided a foundation for our model but also enriched our understanding of the prevalence and causes of suicide among the homeless. The outcomes of our study revealed significant patterns and predictors that can enhance the effectiveness of suicide prevention strategies, offering a new perspective on addressing this public health challenge. The significance of our findings extends beyond academic interest; they offer practical insights for policymakers, healthcare providers, and social workers who are directly involved in supporting the homeless population. By identifying high-risk individuals, our model can inform targeted interventions, potentially saving lives and allocating resources more efficiently.

The structure of the paper is organized as follows: The data section delves into the broader context of the dataset, emphasizing the crucial aspects of measurement relevant to our study. The results section is comprehensive, encompassing various illustrative tables and graphs alongside detailed statistical analyses. Subsequently, the model section elucidates the setup and justification of our chosen modelling approach, ensuring clarity and transparency of our methodology. Lastly, the discussion articulates the study's contributions to our understanding of homelessness and suicide and outlines directions for future research, ensuring a thorough contemplation of the study's broader implications.

# Data {#sec-data}

## Data source

The study was performed using data from the City of Toronto's **opendatatoronto** database portal, accessed through the 'opendatatoronto' package and processed using the statistical programming environment **R**. The **tidyverse** package facilitated the data and the **kableExtra** package was utilized for enhancing table presentations. Specific to this study, the LaTeX package was implemented in the R markdown setting to ensure stable positioning of figures and tables.

### Data measurment

Initiated in January 2017, Toronto Public Health (TPH) embarked on a systematic record-keeping of homeless mortality to gain a clearer understanding of the prevalence and causative trends of these incidents. The dataset comprises variables such as the year of death, cause of death, age group, gender, and number of deaths. It classifies individuals into age categories spanning 20 years, starting from 20 years to 60+ years, with gender recorded as either Male or Female. The dataset enumerates the deaths annually from 2017 through 2023, categorizing the causes into distinct classifications like Accident, Drug Toxicity", Suicide, among others.

Focusing on suicide-related fatalities, the dataset was refined to exclude entries marked as Unknown or empty. This filtration led to the construction of two specialized datasets: one delineating the yearly suicide death toll segregated by gender and another by age group. This reorganization necessitated aggregating individual counts from each report into a consolidated figure for these subgroups, facilitating a focused examination of suicide trends across different demographics over the years. 

Table @tbl-suicide-age-group presents the refined data, specifically spotlighting instances of suicide by age groups, and depicting the temporal and numerical specifics of each case.

```{r}
#| label: tbl-suicide-age-group
#| tbl-cap: Summary of Suicides by Age Group
#| echo: false
#| warning: false
#| message: false

# Loading the dataset
suicide_by_age <- read_csv(here::here("data/analysis_data/age_group_deaths_data.csv"), show_col_types = FALSE)

# Aggregating data to show total counts for each age group
suicide_summary <- suicide_by_age %>%
  group_by(Age_group) %>%
  summarise(Total_Counts = sum(Count)) %>%
  arrange(desc(Total_Counts))

# Creating a concise table
suicide_summary %>%
  kable(
    col.names = c("Age_group", "Total Counts"),
    digits = 1,
    format = "latex",
    booktabs = TRUE,
    linesep = ""
  ) %>%
  kable_styling(latex_options = "HOLD_position")
```

Table @tbl-suicide-gender-group presents the refined data, specifically spotlighting instances of suicide by gender, and depicting the temporal and numerical specifics of each case.

```{r}
#| label: tbl-suicide-gender-group
#| fig-cap: Summary of suicides Rates by Gender
#| echo: false
#| warning: false
#| message: false

library(knitr)

# Load the dataset containing gender-grouped suicide data
gender_data <- read_csv(here::here("data/analysis_data/gender_group_deaths_data.csv"))

# Refine the age-group dataset to focus on entries specific to suicides
gender_data |> 
  select(Year, sex, count) |>  # Select relevant columns
  slice(1:8) |>  
  kable(
    col.names = c("Year", "sex", "count"),  
    digits = 1,  
    booktabs = TRUE,  # Use booktabs style for the table
    linesep = "") |>  
  kable_styling(latex_options = "HOLD_position")
```

# Model{#sec-model}

## Model set-up 
This section elucidates the development of a logistic regression model, tailored to predict the likelihood of suicide among homeless individuals using demographic factors. Before delving into the model, we visually explore the relationship between suicide rates and demographic variables—age and gender—using ggplot2.

We employ @graph-suicide-gender-group to create a comprehensive visual representation, showcasing the relationship between suicide rates and the key demographic variables, age and gender. This visualization aids in understanding the data distribution and any apparent trends that could influence the model.

```{r}
#| label: graph-suicide-gender-group
#| fig-cap: Summary of Suicide Rates by Age and Gender
#| echo: false
#| warning: false
#| message: false

library(ggplot2)
library(readr)

cleaned_data <- read_csv(here::here("data/analysis_data/cleaned_data.csv"), show_col_types = FALSE)

ggplot(cleaned_data, aes(x = Age_group, y = Count, fill = Gender)) +
  geom_bar(stat = "identity", position = position_dodge()) +
  labs(x = "Age Group",
       y = "Suicide Rate") +
  theme_minimal() +
  scale_fill_brewer(palette = "Set1")
```

The logistic regression model is designed to predict the probability of suicide cases among homeless individuals, utilizing sociodemographic factors such as age and gender. In a Bayesian logistic regression context, the model's setup can be represented with the following hierarchical structure:

\begin{align}
y_i | p_i &\sim \mbox{Bernoulli}(p_i) \\
\log\left(\frac{p_i}{1 - p_i}\right) &= \alpha + \beta_1 \times \text{AgeGroup}_{i1} + \beta_2 \times \text{AgeGroup}_{i2} + \beta_3 \times \text{Gender}_{i} \\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta_j &\sim \mbox{Normal}(0, 2.5) \, \text{for } j = 1, 2, 3 \\
\end{align}

In this adapted model:

- $y_i$ represents the binary outcome for each individual (i.e., the presence or absence of a suicide case).
- $p_i$ is the probability of observing a suicide case for the ith individual, linked to the predictors through the logistic function.
- The coefficients $\alpha$,$\beta_1$, $\beta_2$, and $\beta_3$ are assigned Normal prior distributions, reflecting our prior beliefs about these parameters' distributions before observing the data. The Normal priors are centered at 0 with a standard deviation of 2.5, indicating moderate certainty in the prior information.
- The logit link function (log-odds) is the natural logarithm of the odds $p_i$ / $1 - p_i$ and linearly relates the predictors to the probability of the outcome.

### Model justification 
This Bayesian logistic regression framework not only estimates the parameters but also quantifies uncertainty in the estimates, providing a more comprehensive understanding of the model's predictions and the effects of the predictors. The use of Normal priors for the coefficients is a standard choice in Bayesian modeling, offering flexibility and conjugacy that facilitate both analytical and computational solutions. The hierarchical model structure allows for the incorporation of additional layers of complexity and variability, accommodating more nuanced relationships and potential hierarchical data structures.

# Results

# Discussion 

# References


